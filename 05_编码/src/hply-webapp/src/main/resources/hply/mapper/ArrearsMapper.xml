<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="hply.mapper.ArrearsMapper">

	<cache />

	<select id="getTotalByProject" parameterType="string" resultType="Double">
		select sum(amount) from t_arrears where
		project_id = #{projectId}
	</select>

	<select id="getInterestAmount" parameterType="string" resultType="Double">
		select sum(amount) from t_arrears where
		project_id = #{projectId} and arrears_type = '利息'
	</select>

	<!-- 归还本金 -->
	<update id="restorePrincipal">call proc_restore_principal(#{arrearsId})</update>

	<!-- 归还利息 -->
	<update id="restoreInterest">call proc_restore_interest(#{arrearsId})</update>
</mapper>

